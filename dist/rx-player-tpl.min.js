!function(e){try{e=angular.module("rxPlayerTpls")}catch(t){e=angular.module("rxPlayerTpls",[])}e.run(["$templateCache",function(e){e.put("/template/directive/rx-player.component.html",'<div class="hr-yt-wrapper">\n    <div class="hr-yt-video-place-holder"></div>\n    <div class="hr-yt-overlay" ng-transclude=""></div>\n</div>\n')}])}(),function(e){try{e=angular.module("rxPlayerTpls")}catch(t){e=angular.module("rxPlayerTpls",[])}e.run(["$templateCache",function(e){e.put("/template/overlay/player-panel.component.html",'<div ng-transclude=""></div>\n')}])}(),function(e){try{e=angular.module("rxPlayerTpls")}catch(t){e=angular.module("rxPlayerTpls",[])}e.run(["$templateCache",function(e){e.put("/template/overlay/player-progress-bar-hover-indicator.component.html",'<div class="hr-hover-indicator">\n    <span ng-bind="time"></span>\n</div>\n')}])}(),function(e){try{e=angular.module("rxPlayerTpls")}catch(t){e=angular.module("rxPlayerTpls",[])}e.run(["$templateCache",function(e){e.put("/template/overlay/player-progress-bar.component.html",'<div yt-slider="ctrl.sliderUp$.next($percentage)"\n     yt-slider-down="ctrl.sliderDown$.next()"\n     yt-slider-move="ctrl.sliderMove$.next($percentage)"\n     class="hr-yt-bar" style="width:100%;height:100%;">\n        <div class="hr-yt-played"></div>\n        <div class="hr-yt-loaded"></div>\n        <div class="hr-yt-handle"></div>\n</div>\n<span ng-repeat="marker in markers" class="hr-yt-marker" ng-if="marker.showMarker" marker="marker">\n    </span>\n')}])}(),function(e){try{e=angular.module("rxPlayerTpls")}catch(t){e=angular.module("rxPlayerTpls",[])}e.run(["$templateCache",function(e){e.put("/template/overlay/player-volume-horizontal.component.html",'<div ng-click="ctrl.toggleMute()" class="ng-transclude"></div>\n    <div class="hr-yt-volume-hr-bar"\n         yt-slider-move="ctrl.updateVolume($percentage)"\n         yt-slider="ctrl.updateVolume($percentage)">\n    <div class="hr-yt-setted"></div>\n    <div class="hr-yt-handle"></div>\n</div>\n')}])}();var __assign=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;n>r;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},__decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0};System.register("src/util/rx/from-angular-watch.util",["rxjs/Observable"],function(e,t){"use strict";function r(e,t){return n.Observable.create(function(r){var n,i=t.$watch(e,function(e){e!==n&&void 0!==e&&(r.next(e),n=e)});return function(){i()}})}t&&t.id;e("fromAngularWatch",r);var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("src/util/rx/scope-destroy.util",["rxjs/Observable"],function(e,t){"use strict";function r(e){return n.Observable.create(function(t){return e.$on("$destroy",function(){t.next(),t.complete()})})}t&&t.id;e("observeScopeDestroy",r);var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("src/util/rx/facade",["rxjs/Observable","rxjs/Subject","src/util/rx/from-angular-watch.util","src/util/rx/scope-destroy.util"],function(e,t){"use strict";function r(t){var r={};for(var n in t)"default"!==n&&(r[n]=t[n]);e(r)}t&&t.id;return{setters:[function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)}],execute:function(){}}}),System.register("src/ng-helper/module",["angular"],function(e,t){"use strict";{var r;t&&t.id}return{setters:[function(e){r=e}],execute:function(){r.module("rxPlayer",["ng","rxPlayerTpls"])}}}),System.register("src/ng-helper/component",["angular","src/ng-helper/module"],function(e,t){"use strict";function r(e){return function(t){n.module("rxPlayer").directive(e.selector,function(){var r=[e.selector];e.require&&(r=r.concat(e.require));var n=__assign({},e.scope),i={restrict:"E",templateUrl:e.templateUrl,template:e.template,scope:n,controllerAs:"ctrl",controller:t,bindToController:!0,link:e.link,transclude:e.transclude,require:r};return i})}}t&&t.id;e("Component",r);var n;return{setters:[function(e){n=e},function(){}],execute:function(){}}}),System.register("src/ng-helper/compose-link",[],function(e,t){"use strict";function r(e){return function(t,r,n,i,o){var a=this;e.forEach(function(e){return e.call(a,t,r,n,i,o)})}}t&&t.id;return e("composeLinkFn",r),{setters:[],execute:function(){}}}),System.register("src/ng-helper/directive",["angular","src/ng-helper/module"],function(e,t){"use strict";function r(e){return function(t){n.module("rxPlayer").directive(e.selector,function(){var r=[e.selector];e.require&&(r=r.concat(e.require));var n={restrict:"A",controller:t,link:e.link,multiElement:e.multiElement,transclude:e.transclude,priority:e.priority,terminal:e.terminal,require:r,replace:e.replace,template:e.template};return n})}}t&&t.id;e("Directive",r);var n;return{setters:[function(e){n=e},function(){}],execute:function(){}}}),System.register("src/ng-helper/lifecycle",[],function(e,t){"use strict";function r(e){function t(e,r){return void 0===e||0===r.length?e:t(e[r[0]],r.slice(1))}var r=e.split(".");return function(e){return t(e,r)}}function n(e,t){return function(n,i,o,a){var s=a[0],u=e.map(function(e){return r(e)}),c=n.$watch(function(){for(var r=0;r<e.length;r++)if(!u[r](s)&&!u[r](n))return;c(),s[t]()})}}function i(e){return n(e,"ngOnInit")}function o(e){return n(e,"ngAfterViewInit")}function a(e){return n(e,"ngAfterContentInit")}function s(e){return function(t,r,n,i){var o=t.$watch(n[e],function(e){"undefined"!=typeof e&&(o(),i[0].ngOnInit())})}}t&&t.id;return e("mockNgOnInitLink",i),e("mockNgAfterViewInit",o),e("mockNgAfterContentInit",a),e("mockNgOnInitFromAttr",s),{setters:[],execute:function(){}}}),System.register("src/ng-helper/require",["src/ng-helper/compose-link","src/ng-helper/lifecycle"],function(e,t){"use strict";function r(e){return function(t,r,n,i){var o=i[0];i.splice(1).forEach(function(t,r){t&&(o[e[r]]=t)})}}function n(e){return i.composeLinkFn([r(e),o.mockNgOnInitLink(e)])}t&&t.id;e("bindRequireToCtrl",r),e("bindToCtrlCallOnInit",n);var i,o;return{setters:[function(e){i=e},function(e){o=e}],execute:function(){}}}),System.register("src/ng-helper/local-template-variable",[],function(e,t){"use strict";function r(e,t,r,n){o(r).forEach(function(t){return i(t,e.$parent,n[0])})}function n(e,t,r,n){o(r).forEach(function(t){return i(t,e,n[0])})}function i(e,t,r){t[e]=r,"object"==typeof t.ctrl&&(t.ctrl[e]=r)}function o(e){return Object.keys(e).filter(function(e){return"#"===e[0]}).map(function(e){return e.slice(1)})}t&&t.id;return e("localTemplateVariableLink",r),e("directiveLocalTemplateVariableLink",n),{setters:[],execute:function(){}}}),System.register("src/ng-helper/injector",["angular","src/ng-helper/module"],function(e,t){"use strict";function r(){return i}t&&t.id;e("getInjector",r);var n,i;return{setters:[function(e){n=e},function(){}],execute:function(){i=new Promise(function(e){var t=function(t){return e(t)};t.$inject=["$injector"],n.module("rxPlayer").run(t)})}}}),System.register("src/ng-helper/facade",["src/ng-helper/component","src/ng-helper/compose-link","src/ng-helper/directive","src/ng-helper/lifecycle","src/ng-helper/require","src/ng-helper/local-template-variable","src/ng-helper/injector"],function(e,t){"use strict";function r(t){var r={};for(var n in t)"default"!==n&&(r[n]=t[n]);e(r)}t&&t.id;return{setters:[function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)},function(e){r(e)}],execute:function(){}}}),System.register("src/service/video-player.model",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("src/service/rx-video-interface.model",[],function(e,t){"use strict";{var r;t&&t.id}return{setters:[],execute:function(){r=function(){function e(e){this.player$=e,this.isPlaying=this.player$.switchMap(function(e){return e.playState$.mapTo(e)}).map(function(e){return e.isPlaying()}).startWith(!1),this.isNotPlaying=this.isPlaying.map(function(e){return!e})}return e.prototype.play=function(){this.player$.take(1).subscribe(function(e){return e.play()})},e.prototype.pause=function(){this.player$.take(1).subscribe(function(e){return e.pause()})},e}(),e("RxVideoInterface",r)}}}),System.register("src/util/algebras/curry",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("src/util/algebras/maybe",[],function(e,t){"use strict";function r(){return new a}function n(e){return new u(e)}function i(e){return function(t){return null===t||void 0===t?s:t.map(e)}}t&&t.id;e("nothing",r),e("just",n),e("maybe",i);var o,a,s,u;return{setters:[],execute:function(){o=function(){function e(){}return e.of=function(e){return n(e)},e.nothing=function(){return r()},e.prototype.of=function(t){return e.of(t)},e.fromNullable=function(e){return null===e||void 0===e?new a:n(e)},e.liftA2=function(t){return function(r){return function(n){return e.of(t).ap(r).ap(n)}}},e}(),e("Maybe",o),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.toString=function(){return"None"},t.prototype.ap=function(){return new t},t.prototype.map=function(){return new t},t.prototype.chain=function(){return new t},t.prototype.reduce=function(e,t){return t},t.prototype.isJust=function(){return!1},t.prototype.isNothing=function(){return!0},t.prototype.get=function(){throw new TypeError("Canno't get value out of Nothing")},t.prototype.getOrElse=function(e){return e},t.prototype.orElse=function(e){return e()},t}(o),e("Nothing",a),e("none",s=new a),u=function(e){function t(t){var r=e.call(this)||this;return r.x=t,r}return __extends(t,e),t.prototype.toString=function(){return"Just("+this.x+")"},t.prototype.ap=function(e){var t=this.x;return e.map(t)},t.prototype.map=function(e){return n(e(this.x))},t.prototype.chain=function(e){return e(this.x)},t.prototype.reduce=function(e,t){return e(t,this.x)},t.prototype.isJust=function(){return!0},t.prototype.isNothing=function(){return!1},t.prototype.get=function(){return this.x},t.prototype.getOrElse=function(){return this.x},t.prototype.orElse=function(){return this},t}(o),e("Just",u)}}}),System.register("src/util/algebras/maybe-rx",["src/util/algebras/maybe","rxjs/observable/of","rxjs/observable/throw"],function(e,t){"use strict";{var r,n,i;t&&t.id}return{setters:[function(e){r=e},function(e){n=e},function(e){i=e}],execute:function(){r.Just.prototype.toObservable=function(){return n.of(this.x)},r.Nothing.prototype.toObservable=function(){return i._throw(null)}}}}),System.register("src/service/rx-video.service",["src/util/rx/facade","src/util/algebras/maybe","src/util/algebras/maybe-rx"],function(e,t){"use strict";function r(e,t){a[e]=t}function n(e,t,r){return console.log("creating video player"),o.Maybe.fromNullable(a[e]).toObservable().switchMap(function(e){return e.createVideoPlayer(t,r)}).catch(function(){return i.Observable.throw('Video player "'+e+'" not found')})}t&&t.id;e("registerVideoPlayer",r),e("createVideoPlayer",n);var i,o,a;return{setters:[function(e){i=e},function(e){o=e},function(){}],execute:function(){a={}}}}),System.register("src/directive/rx-player.component",["src/util/rx/facade","src/ng-helper/facade","src/service/rx-video-interface.model","src/service/rx-video.service"],function(e,t){"use strict";{var r,n,i,o,a,s,u;t&&t.id}return{setters:[function(e){r=e},function(e){n=e},function(e){i=e},function(e){o=e}],execute:function(){a=["id","height","width"],s=["autohide","autoplay","ccLoadPolicy","color","controls","disablekb","enablejsapi","end","fs","ivLoadPolicy","list","listType","loop","modestbranding","origin","playerapiid","playlist","playsinline","rel","showinfo","start","theme"],u=function(){function e(e,t,r){this.elm=e,this.attrs=t,this.scope=r,e.css("position","relative"),e.css("display","block"),this.setOverlayElement(e),this.ngOnInit()}return e.prototype.setOverlayElement=function(e){this.$overlayElm=e},e.prototype.getOverlayElement=function(){return this.$overlayElm},e.prototype.ngOnInit=function(){var e=this,t=this.elm[0].querySelector(".hr-yt-video-place-holder"),n={playerVars:{}};a.forEach(function(t){e.attrs.hasOwnProperty(t)&&(n[t]=e.attrs[t])}),s.forEach(function(t){e.attrs.hasOwnProperty(t)&&(n.playerVars[t]=e.attrs[t])});var u=r.fromAngularWatch(function(){return e.videoSource},this.scope).publishReplay(1).refCount(),c=r.observeScopeDestroy(this.scope);this.player$=u.map(function(e){return{playerClass:e.player,options:__assign({},n,{sources:e.sources})}}).switchMap(function(e){var r=e.playerClass,n=e.options;return o.createVideoPlayer(r,n,t)}).withLatestFrom(u,function(e,t){return{player:e,source:t}}).switchMap(function(e){var t=e.player,r=e.source;return t.load(r)}).takeUntil(c).publishReplay(1).refCount(),this.player$.subscribe(function(){},function(e){return console.error("There was a problem loading the video player: "+e)}),this.video=new i.RxVideoInterface(this.player$)},e}(),u.$inject=["$element","$attrs","$scope"],u=__decorate([n.Component({selector:"rxPlayer",templateUrl:"/template/directive/rx-player.component.html",transclude:!0,link:n.localTemplateVariableLink,scope:{videoSource:"="}}),__metadata("design:paramtypes",[Object,Object,Object])],u),e("RxPlayerComponent",u)}}}),System.register("src/directive/yt-slider.directive",["src/ng-helper/facade","angular"],function(e,t){"use strict";{var r,n,i;t&&t.id}return{setters:[function(e){r=e},function(e){n=e}],execute:function(){i=function(){function e(e,t,r,n,i){this.elm=e,this.attrs=t,this.scope=r,this.$parse=n,this.$document=i,this.ngOnInit()}return e.prototype.ngOnInit=function(){var e=this,t=this.$parse(this.attrs.ytSliderDown),r=this.$parse(this.attrs.ytSliderMove),i=this.$parse(this.attrs.ytSlider),o=function(t){var r=e.elm[0].getBoundingClientRect().left,n=Math.min(Math.max(0,t-r),e.elm[0].clientWidth),i=n/e.elm[0].clientWidth;return i};this.elm.on("mousedown",function(a){if(0===a.button){var s=o(a.pageX);t(e.scope,{$percentage:s});var u=n.element("<div></div>");u.css("position","absolute"),u.css("width","100%"),u.css("height","100%"),u.css("pointer-events","false"),u.css("top","0"),document.body.appendChild(u[0]);var c=function(t){e.scope.$apply(function(){var n=o(t.pageX);r(e.scope,{$percentage:n})})},l=function(t){e.scope.$apply(function(){var r=o(t.pageX);e.$document.off("mousemove",c),e.$document.off("mouseup",l),u.remove(),i(e.scope,{$percentage:r})})};e.$document.on("mousemove",c),e.$document.on("mouseup",l)}})},e}(),i.$inject=["$element","$attrs","$scope","$parse","$document"],i=__decorate([r.Directive({selector:"ytSlider"}),__metadata("design:paramtypes",[Object,Object,Object,Object,Object])],i),e("YoutubeSliderDirective",i)}}}),System.register("src/ng-helper/plain-model",["angular"],function(e,t){"use strict";function r(e){return function(t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return i.forEach(function(t,n){e.$inject[t]=r[n]}),e.onDepsLoad&&e.onDepsLoad(),t}var i=Object.keys(e.$inject||{});n.module("rxPlayer").factory(e.name,r),r.$inject=i}}t&&t.id;e("PlainModel",r);var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("src/players/youtube/youtube-quality-map.service",[],function(e,t){"use strict";function r(e){var t,r={};for(var n in e)t=e[n],r[t]=n;return r}{var n,i,o,a,s;t&&t.id}return{setters:[],execute:function(){n={hd1080:"1080p",hd720:"720p",large:"480p",medium:"360p",small:"240p",tiny:"144p",auto:"Auto"},i=r(n),e("convertToYoutube",o=function(e){return n[e]?n[e]:"Auto"}),e("convertFromYoutube",a=function(e){return i[e]?i[e]:"default"}),e("convertToYoutubeArray",s=function(e){return e.map(o)})}}}),System.register("src/util/uuid.service",[],function(e,t){"use strict";function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}t&&t.id;return e("uuid",r),{setters:[],execute:function(){}}}),System.register("src/service/youtube-marker-list.model",["angular"],function(e,t){"use strict";{var r;t&&t.id}return{setters:[function(e){r=e}],execute:function(){r.module("rxPlayer").factory("YoutubeMarkerList",function(){var e=function(){this.markersById={},this.player=null};return e.prototype.getMarkers=function(){return this.markersById},e.prototype.add=function(e){return this.markersById[e.id]=e,this.player.emit("markerAdd",e),e},e.prototype.remove=function(e){var t=this.markersById[e];return t&&(delete this.markersById[e],this.player.emit("markerRemove",t)),t},e.prototype.getMarker=function(e){return this.markersById[e]},e.prototype.setPlayer=function(e){this.player=e},e})}}}),System.register("src/players/youtube/youtube-player.model",["angular","src/util/rx/facade","src/ng-helper/plain-model","src/players/youtube/youtube-quality-map.service","src/util/uuid.service","src/service/youtube-marker-list.model"],function(e,t){"use strict";{var r,n,i,o,a,s,u;t&&t.id}return{setters:[function(e){r=e},function(e){n=e},function(e){i=e},function(e){o=e},function(e){a=e},function(){}],execute:function(){s={$q:void 0,$interval:void 0,$rootScope:void 0,YoutubeMarkerList:void 0},u=function(){function e(e,t){var i=this;this.options=t,this._muted=!1,this._volume=100,this._intendedQuality="default",this.eventEmmiter=new n.Subject,this.playState$=this.fromEvent("onStateChange").filter(function(e){return-1!==[YT.PlayerState.PLAYING,YT.PlayerState.ENDED,YT.PlayerState.PAUSED].indexOf(e.data)}).map(function(e){return{player:i,type:"playstate",isPlaying:e.data===YT.PlayerState.PLAYING}}),this.progress$=this.fromEvent("onStateChange").switchMap(function(e){return e.data!==YT.PlayerState.PLAYING?n.Observable.empty():n.Observable.interval(100)}).map(function(){var e={player:i,type:"videoprogress",time:i.getCurrentTime()};return e}),this.loaded$=n.Observable.empty(),this.seeking$=new n.Subject,this.seeked$=new n.Subject,this.playbackRate$=this.fromEvent("onPlaybackRateChange").map(function(){var e={player:i,type:"ratechange",rate:i.getPlaybackRate()};return e}),this.volumeState$=this.eventEmmiter.filter(function(e){return"volumechange"===e.type}).map(function(){var e={player:i,type:"volumechange",volume:i.getVolume(),isMuted:i.isMuted()};return e}),this._eventsInitialized=!1,this._markerListener=!1;var o=r.copy(this.options);o.width="100%",o.height="100%",this.player=new YT.Player(e,o),this.markerList=new s.YoutubeMarkerList,this.on("onStateChange",function(e){e.data===YT.PlayerState.PLAYING&&(i.setVolume(i.player.getVolume()),i._setMuted(i.player.isMuted()))}),this.on("markerAdd",function(e){i._initializeMarkerListener(),e.setPlayer(i)}),this.on("markerRemove",function(e){return e.end()})}return e.prototype.load=function(e){var t=this,r=this.fromEvent("onStateChange").filter(function(e){return e.data===YT.PlayerState.PLAYING}).scan(function(e){return e+1},0).filter(function(e){return 1===e}).do(function(){return t.player.pauseVideo()}).map(function(){return t});return this.player.loadVideoById(e.youtubeId),r},e.prototype.play=function(){return this.player.playVideo()},e.prototype.pause=function(){return this.player.pauseVideo()},e.prototype.isPlaying=function(){return this.player.getPlayerState()===YT.PlayerState.PLAYING},e.prototype.getDuration=function(){return this.player.getDuration()},e.prototype.getCurrentTime=function(){return this.player.getCurrentTime()},e.prototype.getLoadedPercent=function(){return 100*this.player.getVideoLoadedFraction()},e.prototype.seekTo=function(e){var t=this,r=this.getCurrentTime();return this.player.seekTo(e,!0),this.seeking$.next({player:this,type:"seeking"}),n.Observable.interval(200).map(function(){return t.getCurrentTime()}).filter(function(t){if(r>e){if(r>t)return!0}else if(t>e||.1>e-t)return!0;return!1}).take(1).mapTo({player:this,type:"seeked"}).subscribe(function(e){return t.seeked$.next(e)}),this.seeked$.take(1).toPromise()},e.prototype.getPlaybackRate=function(){return this.player.getPlaybackRate()},e.prototype.setPlaybackRate=function(e){return this.player.setPlaybackRate(e)},e.prototype.getAvailablePlaybackRates=function(){return this.player.getAvailablePlaybackRates()},e.prototype.toggleMute=function(){this.isMuted()?this.unMute():this.mute()},e.prototype.isMuted=function(){return this._muted||0===this._volume},e.prototype.setVolume=function(e){var t=this._volume!==e;this._setMuted(0===e),this._volume=e,this.player.setVolume(e),t&&this.eventEmmiter.next({player:this,type:"volumechange"})},e.prototype.getVolume=function(){return this._muted?0:this._volume},e.prototype._setMuted=function(e){var t=this._muted!==e;this._muted=e,t&&this.eventEmmiter.next({player:this,type:"volumechange"})},e.prototype.mute=function(){this._setMuted(!0),this.player.mute()},e.prototype.unMute=function(){this._setMuted(!1),this.player.unMute()},e.prototype.setOverlayElement=function(e){this._element=e},e.prototype.getOverlayElement=function(){return this._element},e.prototype.onProgress=function(e,t){"undefined"==typeof t&&(t=100);var r=null,n=function(){null===r&&(r=s.$interval(e,t))},i=function(){s.$interval.cancel(r),r=null},o=function(){i()};return this.on("onStateChange",function(e){e.data===YT.PlayerState.PLAYING?n():i()}),this.getPlayerState()===YT.PlayerState.PLAYING&&n(),o},e.prototype.startLoading=function(e){var t,r=this,n=function(n){n.data===YT.PlayerState.PLAYING&&("number"==typeof e&&r.seekTo(e),t(),r.player.pauseVideo())};t=this.on("onStateChange",n),this.player.playVideo()},e.prototype._initializeEventListener=function(){var e=this;if(!this._eventsInitialized){this._eventHash=a.uuid();var t=["onStateChange","onPlaybackQualityChange","onPlaybackRateChange","onError","onApiChange","onReady"];r.forEach(t,function(t){e.player.addEventListener(t,function(r){e.emit(t,r)})}),this._eventsInitialized=!0}},e.prototype.on=function(e,t){return this._initializeEventListener(),s.$rootScope.$on(this._eventHash+e,function(e,r){t(r)})},e.prototype.emit=function(e,t){s.$rootScope.$emit(this._eventHash+e,t)},e.prototype._initializeMarkerListener=function(){var e=this;if(!this._markerListener){this._markerListener=!0;var t=function(t){t.start()&&e.emit("markerRun",t)},n=function(t){t.end(),e.emit("markerStop",t)},i=-1;this.onProgress(function(){var o=e.getCurrentTime(),a=i;r.forEach(e.markerList.getMarkers(),function(e){e.startedIn(i,o)&&(t(e),a=Math.max(a,e.startTime)),e.endedIn(i,o)&&e.isRunning()&&(n(e),a=Math.max(a,e.endTime))}),i=a}),this.on("seekToCompleted",function(o){r.forEach(e.markerList.getMarkers(),function(e){e.isRunning()?e.inRange(o.newTime)||n(e):e.shouldLaunchOnSeek(o)&&t(e)}),i=o.newTime})}},e.prototype.setMarkerList=function(e){this._initializeMarkerListener(),this.markerList=e,this.markerList.setPlayer(this),this.emit("markerListChanged")},e.prototype.addMarker=function(e){return this.markerList.add(e)},e.prototype.removeMarker=function(e){return this.markerList.removeById(e)},e.prototype.getMarkers=function(){return this.markerList.getMarkers()},e.prototype.getMarker=function(e){return this.markerList.getMarker(e)},e.prototype.getHumanPlaybackQuality=function(){return o.convertToYoutube(this.player.getPlaybackQuality())},e.prototype.getHumanIntendedPlaybackQuality=function(e){var t=o.convertToYoutube(this._intendedQuality);return"Auto"===t&&e&&"Auto"!==this.getHumanPlaybackQuality()&&(t+=" ("+this.getHumanPlaybackQuality()+")"),t},e.prototype.setHumanPlaybackQuality=function(e){var t=o.convertFromYoutube(e);this.setPlaybackQuality(t),this.emit("onIntentPlaybackQualityChange")},e.prototype.setPlaybackQuality=function(e){this._intendedQuality=e,this.player.setPlaybackQuality(e)},e.prototype.destroy=function(){return this.player.destroy()},e.prototype.loadVideoById=function(e,t,r){return this.player.loadVideoById(e,t,r),this},e.prototype.fromEvent=function(e){var t=this,r=function(r){return t.player.addEventListener(e,r)},i=function(r){return t.player.removeEventListener(e,r)};return n.Observable.fromEventPattern(r,i)},e.prototype.getAvailableQualityLevels=function(){return this.player.getAvailableQualityLevels()},e.prototype.getPlayerState=function(){return this.player.getPlayerState()},e}(),u=__decorate([i.PlainModel({name:"YoutubePlayer",$inject:s}),__metadata("design:paramtypes",[Object,Object])],u),e("YoutubePlayer",u)}}}),System.register("src/overlay/hr-yt-marker.directive",["angular","src/ng-helper/facade"],function(e,t){"use strict";{var r,n,i;t&&t.id}return{setters:[function(e){r=e},function(e){n=e}],execute:function(){i=function(){function e(e,t){this.elm=e,this.scope=t}return e.prototype.ngOnInit=function(){var e=this;this.rxPlayer.player$.subscribe(function(t){var r=t.getDuration(),n=e.scope.marker;""!==n.barCss&&e.elm.addClass(n.barCss);var i=function(){var t=100*n.startTime/r;e.elm.css("left",t+"%")};i(),n.hasOwnProperty("mutable")&&n.mutable&&e.scope.$watch(function(){return n.startTime},function(e,t){e!==t&&i()})})},e}(),i.$inject=["$element","$scope"],e("YoutubeMarker",i),r.module("rxPlayer").directive("hrYtMarker",function(){return{restrict:"C",require:["hrYtMarker","^youtubePlayer"],scope:{marker:"="},link:n.bindToCtrlCallOnInit(["rxPlayer"]),controller:i}})}}}),System.register("src/overlay/player-current-quality.directive",["src/ng-helper/facade"],function(e,t){"use strict";{var r,n;t&&t.id}return{setters:[function(e){r=e}],execute:function(){n=function(){function e(e,t){this.elm=e,this.attrs=t}return e.prototype.ngOnInit=function(){var e=this;this.rxPlayer.player$.subscribe(function(t){var r=function(){var r;if(e.attrs.hasOwnProperty("intendedQuality")){var n=!1;e.attrs.hasOwnProperty("showRealAuto")&&(n=!0),r=t.getHumanIntendedPlaybackQuality(n)}else r=t.getHumanPlaybackQuality();e.elm.html(r)};t.on("onPlaybackQualityChange",r),t.on("onIntentPlaybackQualityChange",r),r()})},e}(),n.$inject=["$element","$attrs"],n=__decorate([r.Directive({selector:"playerCurrentQuality",link:r.bindToCtrlCallOnInit(["rxPlayer"]),require:["^rxPlayer"]}),__metadata("design:paramtypes",[Object,Object])],n),e("PlayerCurrentQualityComponent",n)}}}),System.register("src/overlay/player-current-speed.directive",["src/util/rx/facade","src/ng-helper/facade"],function(e,t){"use strict";{var r,n,i;t&&t.id}return{setters:[function(e){r=e},function(e){n=e}],execute:function(){i=function(){function e(e,t,r,n){this.$scope=e,this.elm=t,this.attr=r,this.$parse=n}return e.prototype.ngOnInit=function(){var e=this,t=this.$parse(this.attr.playerCurrentSpeed)(this.$scope),n=r.observeScopeDestroy(this.$scope);t.switchMap(function(e){return e.playbackRate$}).map(function(e){return e.rate}).takeUntil(n).subscribe(function(t){e.elm.html(t)})},e}(),i.$inject=["$scope","$element","$attrs","$parse"],i=__decorate([n.Directive({selector:"playerCurrentSpeed",link:n.mockNgOnInitFromAttr("playerCurrentSpeed")}),__metadata("design:paramtypes",[Object,Object,Object,Object])],i),e("PlayerCurrentSpeedDirective",i)}}}),System.register("src/service/readable-time.service",[],function(e,t){"use strict";function r(e){e=Math.floor(e);var t=e%60,r=Math.floor(e/60),n=Math.floor(r/60);return r%=60,n>0?n+":"+String("00"+r).slice(-2)+":"+String("00"+t).slice(-2):r+":"+String("00"+t).slice(-2)}t&&t.id;return e("readableTime",r),{setters:[],execute:function(){}}}),System.register("src/overlay/player-current-time.directive",["src/util/rx/facade","src/ng-helper/facade","src/service/readable-time.service"],function(e,t){"use strict";{var r,n,i,o;t&&t.id}return{setters:[function(e){r=e},function(e){n=e},function(e){i=e}],execute:function(){o=function(){function e(e,t,r,n){this.$scope=e,this.elm=t,this.attr=r,this.$parse=n}return e.prototype.ngOnInit=function(){var e=this,t=this.$parse(this.attr.playerCurrentTime)(this.$scope),n=r.observeScopeDestroy(this.$scope);t.switchMap(function(e){return r.Observable.merge(e.progress$,e.seeked$).mapTo(e)}).map(function(e){return e.getCurrentTime()}).map(function(e){return i.readableTime(e)}).takeUntil(n).subscribe(function(t){return e.elm.html(t)})},e}(),o.$inject=["$scope","$element","$attrs","$parse"],o=__decorate([n.Directive({selector:"playerCurrentTime",link:n.mockNgOnInitFromAttr("playerCurrentTime")}),__metadata("design:paramtypes",[Object,Object,Object,Object])],o),e("PlayerCurrentTimeComponent",o)}}}),System.register("src/overlay/player-panel.component",["src/ng-helper/facade"],function(e,t){"use strict";{var r,n;t&&t.id}return{setters:[function(e){r=e}],execute:function(){n=function(){function e(e,t,r,n){this.elm=e,this.attrs=t,this.$animate=r,this.$timeout=n}return e.prototype.ngOnInit=function(){var e=this,t=this.rxPlayer.getOverlayElement();this.rxPlayer.player$.subscribe(function(r){var n={},i=function(t){n[t]=!0,e.$animate.addClass(e.elm,"ng-show")},o=function(t){delete n[t],0===Object.keys(n).length&&e.$animate.removeClass(e.elm,"ng-show")};if("showOnHover"in e.attrs&&e.attrs.showOnHover!==!1){var a=parseInt(e.attrs.showOnHover),s=null,u=function(){null!==s&&e.$timeout.cancel(s),s=null};t.on("mouseenter",function(){u(),i("showOnHover"),isNaN(a)||(s=e.$timeout(function(){return o("showOnHover")},a))}),t.on("mouseleave",function(){u(),o("showOnHover")})}var c=function(e){e.data===YT.PlayerState.PLAYING?o("showOnPause"):i("showOnPause")};"showOnPause"in e.attrs&&e.attrs.showOnPause!==!1&&(r.on("onStateChange",c),c({data:r.getPlayerState()}))})},e}(),n.$inject=["$element","$attrs","$animate","$timeout"],n=__decorate([r.Component({selector:"playerPanel",link:r.bindToCtrlCallOnInit(["rxPlayer"]),require:["^rxPlayer"],transclude:!0,templateUrl:"/template/overlay/player-panel.component.html"}),__metadata("design:paramtypes",[Object,Object,Object,Object])],n),e("PlayerPanelComponent",n)}}}),System.register("src/overlay/player-progress-bar-hover-indicator.component",["src/ng-helper/facade","src/service/readable-time.service"],function(e,t){"use strict";{var r,n,i;t&&t.id}return{setters:[function(e){r=e},function(e){n=e}],execute:function(){i=function(){function e(e,t,r,n,i,o){this.elm=e,this.$document=t,this.$compile=r,this.$templateCache=n,this.$http=i,this.scope=o}return e.prototype.ngOnInit=function(){var e=this,t=function(t){var r=e.elm[0].getBoundingClientRect().left,n=Math.min(Math.max(0,t-r),e.elm[0].clientWidth),i=n/e.elm[0].clientWidth;return i},r="/template/overlay/player-progress-bar-hover-indicator.component.html",i=this.$http.get(r,{cache:this.$templateCache}).then(function(e){return e.data}),o=null,a=this.scope.$new(!0);i.then(function(t){o=e.$compile(t)(a),o.addClass("ng-hide"),e.elm.parent().append(o)}),this.rxPlayer.player$.subscribe(function(r){var i=r.getDuration(),s=function(e){var r=t(e.pageX);a.$apply(function(e){e.time=n.readableTime(r*i)}),o.css("left",100*r+"%")};e.elm.on("mouseenter",function(){e.$document.on("mousemove",s),o.removeClass("ng-hide")}),e.elm.on("mouseleave",function(){e.$document.off("mousemove",s),o.addClass("ng-hide")})})},e}(),i.$inject=["$element","$document","$compile","$templateCache","$http","$scope"],i=__decorate([r.Directive({selector:"hoverIndicator",link:r.bindToCtrlCallOnInit(["rxPlayer"]),require:["^rxPlayer"]}),__metadata("design:paramtypes",[Object,Object,Object,Object,Object,Object])],i),e("HoverIndicatorComponent",i)}}}),System.register("src/util/store.util",["rxjs/Subject"],function(e,t){"use strict";{var r,n;t&&t.id}return{setters:[function(e){r=e}],execute:function(){n=function(){function e(e){this._dispacher=new r.Subject,this._state=this._dispacher.startWith({type:"INITIAL_ACTION"}).scan(e,void 0).publishReplay(1).refCount()}return e.prototype.dispatch=function(e){this._dispacher.next(e)
},e.prototype.select=function(){return this._state},e}(),e("Store",n)}}}),System.register("src/overlay/player-progress-bar.component",["src/util/rx/facade","src/ng-helper/facade","src/util/store.util","angular"],function(e,t){"use strict";function r(e,t){switch(void 0===e&&(e=s),t.type){case"SET_WAS_PLAYING":return __assign({},e,{wasPlaying:t.payload});case"START_SEEKING":return __assign({},e,{isSeeking:!0});case"STOP_SEEKING":return __assign({},e,{isSeeking:!1,seekPercentage:t.payload});default:return e}}{var n,i,o,a,s,u;t&&t.id}return{setters:[function(e){n=e},function(e){i=e},function(e){o=e},function(e){a=e}],execute:function(){s={wasPlaying:!1,isSeeking:!1,seekPercentage:0},u=function(){function e(e,t){this.elm=e,this.scope=t,this.sliderDown$=new n.Subject,this.sliderMove$=new n.Subject,this.sliderUp$=new n.Subject}return e.prototype.ngOnInit=function(){var e=this,t=a.element(this.elm[0].querySelector(".hr-yt-played")),i=a.element(this.elm[0].querySelector(".hr-yt-loaded")),s=a.element(this.elm[0].querySelector(".hr-yt-handle")),u=function(r,n,o){var a=100*r/n,u=15,c=a*e.elm[0].clientWidth/100-u/2;c=Math.min(Math.max(0,c),e.elm[0].clientWidth-u),i.css("width",o+"%"),t.css("width",a+"%"),s.css("left",c+"px")},c=new o.Store(r),l=n.observeScopeDestroy(this.scope),p=c.select().distinctUntilChanged(function(e,t){return e.isSeeking===t.isSeeking}),y=this.rxPlayer.player$.switchMap(function(e){return n.Observable.merge(e.progress$,e.loaded$,e.seeked$).map(function(){return e.getCurrentTime()/e.getDuration()})});p.switchMap(function(t){return t.isSeeking?e.sliderMove$:y}).withLatestFrom(this.rxPlayer.player$,function(e,t){return{time:Math.round(t.getDuration()*e),duration:t.getDuration(),loaded:t.getLoadedPercent()}}).takeUntil(l).subscribe(function(e){var t=e.time,r=e.duration,n=e.loaded;return u(t,r,n)}),c.select().switchMap(function(t){return t.isSeeking?n.Observable.empty():e.rxPlayer.player$.switchMap(function(e){return e.playState$}).map(function(e){return e.isPlaying})}).takeUntil(l).subscribe(function(e){return c.dispatch({type:"SET_WAS_PLAYING",payload:e})}),p.withLatestFrom(this.rxPlayer.player$,function(e,t){return{state:e,player:t}}).takeUntil(l).subscribe(function(e){var t=e.state,r=e.player;t.isSeeking?r.pause():r.seekTo(t.seekPercentage*r.getDuration()).then(function(){t.wasPlaying&&r.play()})}),n.Observable.merge(this.sliderDown$.mapTo({type:"START_SEEKING"}),this.sliderUp$.map(function(e){return{type:"STOP_SEEKING",payload:e}})).takeUntil(l).subscribe(function(e){return c.dispatch(e)})},e}(),u.$inject=["$element","$scope"],u=__decorate([i.Component({selector:"playerProgressBar",templateUrl:"/template/overlay/player-progress-bar.component.html",link:i.bindToCtrlCallOnInit(["rxPlayer"]),require:["^rxPlayer"]}),__metadata("design:paramtypes",[Object,Object])],u),e("PlayerProgressBar",u)}}}),System.register("src/overlay/player-repeat-available-quality.directive",["src/ng-helper/facade","src/players/youtube/youtube-quality-map.service"],function(e,t){"use strict";{var r,n,i;t&&t.id}return{setters:[function(e){r=e},function(e){n=e}],execute:function(){i=function(){function e(e,t){this.scope=e,this.attrs=t}return e.prototype.ngOnInit=function(){var e=this;this.rxPlayer.player$.subscribe(function(t){var r=t.on("onStateChange",function(i){i.data===YT.PlayerState.PLAYING&&(r(),e.scope.availableQuality=n.convertToYoutubeArray(t.getAvailableQualityLevels()),e.attrs.hasOwnProperty("reverse")&&e.scope.availableQuality.reverse())});e.scope.availableQuality=["Auto"]})},e}(),i.$inject=["$scope","$attrs"],i=__decorate([r.Directive({selector:"playerRepeatAvailableQuality",link:r.bindToCtrlCallOnInit(["rxPlayer"]),require:["^rxPlayer"],replace:!0,priority:1e3,template:function(e){return e.removeAttr("player-repeat-available-quality"),e.attr("ng-repeat","$quality in availableQuality"),e[0].outerHTML}}),__metadata("design:paramtypes",[Object,Object])],i),e("PlayerRepeatAvailableSpeedDirective",i)}}}),System.register("src/overlay/player-repeat-available-speed.directive",["src/ng-helper/facade"],function(e,t){"use strict";{var r,n;t&&t.id}return{setters:[function(e){r=e}],execute:function(){n=function(){function e(e,t){this.scope=e,this.attrs=t}return e.prototype.ngOnInit=function(){var e=this;this.rxPlayer.player$.subscribe(function(t){e.scope.availableSpeeds=t.getAvailablePlaybackRates(),e.attrs.hasOwnProperty("reverse")&&e.scope.availableSpeeds.reverse()})},e}(),n.$inject=["$scope","$attrs"],n=__decorate([r.Directive({selector:"playerRepeatAvailableSpeed",link:r.bindToCtrlCallOnInit(["rxPlayer"]),require:["^rxPlayer"],replace:!0,priority:1e3,template:function(e){return e.removeAttr("player-repeat-available-speed"),e.attr("ng-repeat","$speed in availableSpeeds"),e[0].outerHTML}}),__metadata("design:paramtypes",[Object,Object])],n),e("PlayerRepeatAvailableSpeedDirective",n)}}}),System.register("src/overlay/player-set-quality.directive",["src/ng-helper/facade"],function(e,t){"use strict";{var r,n;t&&t.id}return{setters:[function(e){r=e}],execute:function(){n=function(){function e(e,t,r,n){this.elm=e,this.$parse=t,this.attrs=r,this.scope=n}return e.prototype.ngOnInit=function(){var e=this,t=this.$parse(this.attrs.playerSetQuality);this.rxPlayer.player$.subscribe(function(r){return e.elm.on("click",function(){return e.scope.$apply(function(){return r.setHumanPlaybackQuality(t(e.scope))})})})},e}(),n.$inject=["$element","$parse","$attrs","$scope"],n=__decorate([r.Directive({selector:"playerSetQuality",link:r.bindToCtrlCallOnInit(["rxPlayer"]),require:["^rxPlayer"]}),__metadata("design:paramtypes",[Object,Object,Object,Object])],n),e("PlayerCurrentTimeComponent",n)}}}),System.register("src/overlay/player-set-speed.directive",["src/ng-helper/facade"],function(e,t){"use strict";{var r,n;t&&t.id}return{setters:[function(e){r=e}],execute:function(){n=function(){function e(e,t,r,n){this.elm=e,this.attrs=t,this.$parse=r,this.scope=n}return e.prototype.ngOnInit=function(){var e=this,t=this.$parse(this.attrs.playerSetSpeed);this.rxPlayer.player$.subscribe(function(r){return e.elm.on("click",function(){return e.scope.$apply(function(){var n=t(e.scope);r.setPlaybackRate(n)})})})},e}(),n.$inject=["$element","$attrs","$parse","$scope"],n=__decorate([r.Directive({selector:"playerSetSpeed",link:r.bindToCtrlCallOnInit(["rxPlayer"]),require:["^rxPlayer"]}),__metadata("design:paramtypes",[Object,Object,Object,Object])],n),e("PlayerSetSpeedDirective",n)}}}),System.register("src/overlay/player-total-time.directive",["src/ng-helper/facade","src/service/readable-time.service"],function(e,t){"use strict";{var r,n,i;t&&t.id}return{setters:[function(e){r=e},function(e){n=e}],execute:function(){i=function(){function e(e,t,r,n){this.$scope=e,this.elm=t,this.attr=r,this.$parse=n}return e.prototype.ngOnInit=function(){var e=this,t=this.$parse(this.attr.playerTotalTime)(this.$scope);t.map(function(e){return e.getDuration()}).map(function(e){return n.readableTime(e)}).subscribe(function(t){return e.elm.html(t)})},e}(),i.$inject=["$scope","$element","$attrs","$parse"],i=__decorate([r.Directive({selector:"playerTotalTime",link:r.mockNgOnInitFromAttr("playerTotalTime"),require:["^rxPlayer"]}),__metadata("design:paramtypes",[Object,Object,Object,Object])],i),e("PlayerTotalTimeDirective",i)}}}),System.register("src/overlay/player-volume-horizontal.component",["angular","src/util/rx/facade","src/ng-helper/facade"],function(e,t){"use strict";{var r,n,i,o;t&&t.id}return{setters:[function(e){r=e},function(e){n=e},function(e){i=e}],execute:function(){o=function(){function e(e,t){this.elm=e,this.$scope=t,this.$volumeBar=r.element(this.elm[0].querySelector(".hr-yt-volume-hr-bar")),this.$settedBar=r.element(this.elm[0].querySelector(".hr-yt-setted")),this.$handle=r.element(this.elm[0].querySelector(".hr-yt-handle"))}return e.prototype.updateVolumeBar=function(e){var t=e*this.$volumeBar[0].clientWidth-this.$handle[0].clientWidth/2;t=Math.min(Math.max(0,t),this.$volumeBar[0].clientWidth-this.$handle[0].clientWidth/2),this.$settedBar.css("width",100*e+"%"),this.$handle.css("left",t+"px")},e.prototype.ngOnInit=function(){var e=this,t=n.observeScopeDestroy(this.$scope);this.player.switchMap(function(e){return e.volumeState$}).map(function(e){return e.volume}).startWith(100).takeUntil(t).subscribe(function(t){e.updateVolumeBar(t/100)}),this.isMuted=this.player.switchMap(function(e){return e.volumeState$}).map(function(e){return e.isMuted}).startWith(!1).takeUntil(t)},e.prototype.updateVolume=function(e){this.setVolume(e),this.updateVolumeBar(e)},e.prototype.setVolume=function(e){this.player.take(1).subscribe(function(t){return t.setVolume(100*e)})},e.prototype.toggleMute=function(){this.player.take(1).subscribe(function(e){return e.toggleMute()})},e}(),o.$inject=["$element","$scope"],o=__decorate([i.Component({selector:"playerVolumeHorizontal",templateUrl:"/template/overlay/player-volume-horizontal.component.html",link:i.composeLinkFn([i.mockNgOnInitLink(["player"]),i.localTemplateVariableLink]),scope:{player:"="},transclude:!0}),__metadata("design:paramtypes",[Object,Object])],o),e("PlayerVolumeHorizontalComponent",o)}}}),System.register("src/service/youtube-marker.model",["angular","src/util/uuid.service"],function(e,t){"use strict";{var r,n;t&&t.id}return{setters:[function(e){r=e},function(e){n=e}],execute:function(){r.module("rxPlayer").factory("YoutubeMarker",function(){var e=function(e){this.startTime=e.startTime||null,this.endTime=e.endTime||null,this.duration=e.duration||null,this.handler=e.handler||this.handler||null,this.fireOnce=e.fireOnce||!1,this.launchOnSeek=e.launchOnSeek||!1,this.blockFF=e.blockFF||!1,this.showMarker="undefined"!=typeof e.showMarker?e.showMarker:!0,this.barCss="undefined"!=typeof e.barCss?e.barCss:"",this._runCount=0,this._isRunning=!1,this.player=null,this.id=this.id||e.id||n.uuid(),null!==this.duration&&(this.endTime=this.startTime+this.duration)};return e.prototype.setPlayer=function(e){this.player=e},e.prototype.getPlayer=function(){return this.player},e.prototype.shouldLaunchOnSeek=function(e){return this.getLaunchOnSeek()?this.hasEndTime()?this.inRange(e.newTime):this.startTime>=e.oldTime&&this.startTime<=e.newTime:void 0},e.prototype.getLaunchOnSeek=function(){return this.getBlockOnFF()?!0:this.launchOnSeek},e.prototype.getBlockOnFF=function(){return this._runCount>0&&this.fireOnce?!1:this.blockFF},e.prototype.hasEndTime=function(){return null!==this.endTime},e.prototype.inRange=function(e){return this.hasEndTime()?e>=this.startTime&&e<this.endTime:!1},e.prototype.startedIn=function(e,t){return this.startTime>e&&this.startTime<=t},e.prototype.endedIn=function(e,t){return this.hasEndTime()?this.endTime>e&&this.endTime<=t:!1},e.prototype.start=function(){return this._isRunning?!1:this._runCount>0&&this.fireOnce?!1:(this._runCount++,this._isRunning=!0,"function"==typeof this.handler&&this.handler(),!0)},e.prototype.end=function(){this.isRunning()&&(this._isRunning=!1,"function"==typeof this.onEnd&&this.onEnd())},e.prototype.isRunning=function(){return this._isRunning},e})}}}),System.register("src/service/youtube-template-marker.model",["angular"],function(e,t){"use strict";{var r;t&&t.id}return{setters:[function(e){r=e}],execute:function(){r.module("rxPlayer").factory("YoutubeTemplateMarker",["$rootScope","$compile","YoutubeMarker","$q","$http","$templateCache",function(e,t,n,i,o,a){var s=function(t){n.call(this,t),this._elm=null,this._scope=null,this._parentScope=t.scope||e,this._parentElm=t.parent,this._addMethod=t.addMethod||"append",this.template=t.template||null,this.link=t.link||this.link||null,this._loadTemplate(t)};return r.extend(s.prototype,n.prototype),s.prototype.setParent=function(e){this._parentElm=e},s.prototype.getParent=function(){return this._parentElm},s.prototype.setParentScope=function(e){this._parentScope=e},s.prototype.getParentScope=function(){return this._parentScope},s.prototype.handler=function(){var e=this;this._parentElm||(this._parentElm=this.player.getOverlayElement()),this._scope=this._parentScope.$new(!0),this.template.then(function(n){var i=r.element(n);e._parentElm[e._addMethod](i),e._elm=t(i)(e._scope),"function"==typeof e.link&&e.link(e._scope)})},s.prototype._loadTemplate=function(e){e.hasOwnProperty("template")?this.template=i.when(e.template):e.hasOwnProperty("templateUrl")&&(this.template=o.get(e.templateUrl,{cache:a}).then(function(e){return e.data}))},s.prototype.onEnd=function(){this.destroy()},s.prototype.destroy=function(){null!==this._elm&&(this._scope.$destroy(),this._elm.remove(),this._scope=null,this._elm=null)},s}])}}}),System.register("src/players/youtube/youtube.service",["angular","src/util/rx/facade","src/service/rx-video.service","src/ng-helper/facade"],function(e,t){"use strict";function r(e,t){return p.then(function(){var r={};return i.extend(r,i.copy(c),t),r.playerVars={},i.extend(r.playerVars,i.copy(c.playerVars),t.playerVars),s.getInjector().then(function(e){return e.get("YoutubePlayer")}).then(function(t){return new t(e,r)}).then(function(e){return new Promise(function(t){return e.on("onReady",function(){return t(e)})})})})}function n(e,t){return o.Observable.create(function(n){e.height=e.height||"390",e.width=e.width||"640";var i;return r(t,e).then(function(e){i=e,n.next(i)}),function(){i&&i.destroy()}})}t&&t.id;e("loadPlayer",r),e("createVideoPlayer",n);var i,o,a,s,u,c,l,p,y;return{setters:[function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e}],execute:function(){u={createVideoPlayer:n},a.registerVideoPlayer("YoutubePlayer",u),c={playerVars:{origin:location.origin+"/",enablejsapi:1}},l=!0,e("apiLoadedPromise",p=new Promise(function(e){window.onYouTubeIframeAPIReady=e})),y=function(){function e(){this.$get=function(){return{loadPlayer:r,getAutoLoad:function(){return l}}}}return e.prototype.setAutoLoad=function(e){l=e},e.prototype.setOptions=function(e){c=e},e.prototype.getOptions=function(){return c},e.prototype.setOption=function(e,t){c[e]=t},e.prototype.setPlayerVarOption=function(e,t){c.playerVars[e]=t},e}(),e("Provider",y),i.module("rxPlayer").provider("youtube",new y)}}}),System.register("src/util/rx/rx-operators-import",["rxjs/add/observable/fromPromise","rxjs/add/observable/fromEventPattern","rxjs/add/observable/fromEvent","rxjs/add/observable/of","rxjs/add/observable/merge","rxjs/add/observable/throw","rxjs/add/observable/empty","rxjs/add/observable/interval","rxjs/add/operator/map","rxjs/add/operator/mapTo","rxjs/add/operator/merge","rxjs/add/operator/scan","rxjs/add/operator/withLatestFrom","rxjs/add/operator/filter","rxjs/add/operator/switchMap","rxjs/add/operator/catch","rxjs/add/operator/startWith","rxjs/add/operator/toPromise","rxjs/add/operator/distinctUntilChanged","rxjs/add/operator/delay","rxjs/add/operator/take","rxjs/add/operator/takeUntil","rxjs/add/operator/last","rxjs/add/operator/do","rxjs/add/operator/publishReplay","rxjs/add/operator/multicast"],function(e,t){"use strict";t&&t.id;return{setters:[function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){}}}),System.register("src/main",["src/directive/rx-player.component","src/directive/yt-slider.directive","src/overlay/hr-yt-marker.directive","src/overlay/player-current-quality.directive","src/overlay/player-current-speed.directive","src/overlay/player-current-time.directive","src/overlay/player-panel.component","src/overlay/player-progress-bar-hover-indicator.component","src/overlay/player-progress-bar.component","src/overlay/player-repeat-available-quality.directive","src/overlay/player-repeat-available-speed.directive","src/overlay/player-set-quality.directive","src/overlay/player-set-speed.directive","src/overlay/player-total-time.directive","src/overlay/player-volume-horizontal.component","src/service/youtube-marker-list.model","src/service/youtube-marker.model","src/players/youtube/youtube-player.model","src/service/youtube-template-marker.model","src/players/youtube/youtube.service","src/util/rx/rx-operators-import","angular"],function(e,t){"use strict";{var r;t&&t.id}return{setters:[function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(e){r=e}],execute:function(){"undefined"==typeof window.onYouTubeIframeAPIReady&&(window.onYouTubeIframeAPIReady=function(){setTimeout(function(){window.onYouTubeIframeAPIReady()},100)}),r.module("rxPlayer").run(["youtube",function(e){if(e.getAutoLoad()){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r)}}])}}}),System.register("src/ng-helper/async.filter",["angular"],function(e,t){"use strict";function r(){function e(e,i){if(!e||!e.subscribe&&!e.then)return e;var o=t(e);if(!(o in n)){var a=e.subscribe&&e.subscribe.bind(e)||e.success&&e.success.bind(e)||e.then.bind(e);n[o]=a(function(e){r[o]=e,i&&i.$applyAsync&&i.$applyAsync()}),i&&i.$on&&i.$on("$destroy",function(){n[o]&&n[o].dispose&&n[o].dispose(),delete n[o],delete r[o]})}return r[o]}function t(e){return e.hasOwnProperty("__asyncFilterObjectID__")||(e.__asyncFilterObjectID__=++i),e.__asyncFilterObjectID__}var r={},n={},i=0;return e.$stateful=!0,e}{var n;t&&t.id}return{setters:[function(e){n=e}],execute:function(){n.module("rxPlayer").filter("async",r)}}}),System.register("src/players/html5/html5-player.model",["angular","src/util/rx/facade","src/ng-helper/plain-model"],function(e,t){"use strict";{var r,n,i,o;t&&t.id}return{setters:[function(e){r=e},function(e){n=e},function(e){i=e}],execute:function(){o=function(){function e(e,t){var i=this;this.video=document.createElement("video"),this.ready$=n.Observable.fromEvent(this.video,"loadstart").mapTo(this),this.playState$=n.Observable.merge(n.Observable.fromEvent(this.video,"play").mapTo({player:this,type:"playstate",isPlaying:!0}),n.Observable.fromEvent(this.video,"pause").mapTo({player:this,type:"playstate",isPlaying:!1})),this.progress$=n.Observable.fromEvent(this.video,"timeupdate").map(function(){var e={player:i,type:"videoprogress",time:i.getCurrentTime()};return e}),this.loaded$=n.Observable.fromEvent(this.video,"progress").map(function(){var e={player:i,type:"loaded",loaded:i.getLoadedPercent()};return e}),this.seeking$=n.Observable.fromEvent(this.video,"seeking").map(function(){var e={player:i,type:"seeking"};return e}),this.seeked$=n.Observable.fromEvent(this.video,"seeked").map(function(){var e={player:i,type:"seeked"};return e}),this.playbackRate$=n.Observable.fromEvent(this.video,"ratechange").map(function(){var e={player:i,type:"ratechange",rate:i.getPlaybackRate()};return e}),this.volumeState$=n.Observable.fromEvent(this.video,"volumechange").map(function(){var e={player:i,type:"volumechange",volume:i.getVolume(),isMuted:i.isMuted()};return e});var o=r.element(this.video);t.sources.map(function(e){return r.element('<source src="'+e.src+'" type="'+e.type+'">')}).forEach(function(e){return o.append(e)}),r.element(e).replaceWith(o)}return e.prototype.load=function(e){e.sources;return n.Observable.fromEvent(this.video,"loadedmetadata").mapTo(this)},e.prototype.play=function(){this.video.play()},e.prototype.pause=function(){this.video.pause()},e.prototype.isPlaying=function(){return!this.video.paused},e.prototype.getDuration=function(){return this.video.duration},e.prototype.getCurrentTime=function(){return this.video.currentTime},e.prototype.getLoadedPercent=function(){for(var e=this.video.buffered,t=Number.NEGATIVE_INFINITY,r=0;r<e.length;r++){var n=e.end(r);t=Math.max(t,n)}return t/this.getDuration()*100},e.prototype.seekTo=function(e){return this.video.currentTime=e,this.seeked$.take(1).toPromise()},e.prototype.getPlaybackRate=function(){return this.video.playbackRate},e.prototype.setPlaybackRate=function(e){this.video.playbackRate=e},e.prototype.getAvailablePlaybackRates=function(){return[1,1.25,1.5,1.75,2]},e.prototype.toggleMute=function(){this.video.muted=!this.video.muted},e.prototype.isMuted=function(){return this.video.muted||0===this.video.volume},e.prototype.setVolume=function(e){this.video.volume=e/100,this.video.muted=0===e},e.prototype.getVolume=function(){return this.video.muted?0:100*this.video.volume},e.prototype.setOverlayElement=function(){},e.prototype.destroy=function(){},e}(),o=__decorate([i.PlainModel({name:"HTML5Player"}),__metadata("design:paramtypes",[o,Object])],o),e("HTML5Player",o)}}}),System.register("src/players/html5/html5-player.service",["src/util/rx/facade","src/players/html5/html5-player.model","src/service/rx-video.service","src/ng-helper/facade"],function(e,t){"use strict";function r(e,t){return s.getInjector().then(function(e){return e.get("HTML5Player")}).then(function(r){return new r(e,t)}).then(function(e){return e.ready$.take(1).toPromise()})}function n(e,t){return i.Observable.create(function(n){e.height=e.height||"390",e.width=e.width||"640";var i;return r(t,e).then(function(e){i=e,n.next(i)}),function(){i&&i.destroy()}})}t&&t.id;e("loadPlayer",r),e("createVideoPlayer",n);var i,o,a,s,u;return{setters:[function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e}],execute:function(){o.HTML5Player,u={createVideoPlayer:n},a.registerVideoPlayer("HTML5Player",u)}}});