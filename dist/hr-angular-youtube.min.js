!function(e){function t(e){return"number"==typeof e||/^\d+$/.test(e)?e+"px":e}function n(e){e=Math.floor(e);var t=e%60,n=Math.floor(e/60),i=Math.floor(n/60);return n%=60,i>0?i+":"+String("00"+n).slice(-2)+":"+String("00"+t).slice(-2):n+":"+String("00"+t).slice(-2)}"undefined"==typeof window.onYouTubeIframeAPIReady&&(window.onYouTubeIframeAPIReady=function(){setTimeout(function(){window.onYouTubeIframeAPIReady()},100)}),e.module("hrAngularYoutube",[]).run(["youtube",function(e){if(e.getAutoLoad()){var t=document.createElement("script");t.src="//www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}}]).provider("youtube",function(){var t={playerVars:{origin:location.origin+"/",enablejsapi:1}},i=!0;this.setAutoLoad=function(e){i=e},this.setOptions=function(e){t=e},this.getOptions=function(){return t},this.setOption=function(e,n){t[e]=n},this.setPlayerVarOption=function(e,n){t.playerVars[e]=n},this.$get=["$window","$q","$interval","$rootScope",function(o,r,a,u){var l=r.defer(),s=l.promise,c=function(n,i){var o={};e.extend(o,e.copy(t),i),o.playerVars={},e.extend(o.playerVars,e.copy(t.playerVars),i.playerVars),this.options=o;var r=e.copy(o);r.width="100%",r.height="100%",this.player=new YT.Player(n,r)};return e.forEach(["loadVideoById","loadVideoByUrl","cueVideoById","cueVideoByUrl","cuePlaylist","loadPlaylist","playVideo","pauseVideo","stopVideo","seekTo","clearVideo","nextVideo","previousVideo","playVideoAt","mute","unMute","isMuted","setVolume","getVolume","setSize","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","setLoop","setShuffle","getVideoLoadedFraction","getPlayerState","getCurrentTime","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getDuration","getVideoUrl","getVideoEmbedCode","getPlaylist","getPlaylistIndex","getIframe","destroy"],function(e){c.prototype[e]=function(){return this.player[e].apply(this.player,arguments)}}),c.prototype.setFullScreenElement=function(e){this._fullScreenElem=e},c.prototype.getHumanReadableDuration=function(){return n(this.getDuration())},c.prototype.getHumanReadableCurrentTime=function(){return n(this.getCurrentTime())},c.prototype.onProgress=function(e,t){"undefined"==typeof t&&(t=100);var n=null,i=function(){null===n&&(n=a(e,t))},o=function(){a.cancel(n),n=null},r=function(){o()};return this.on("onStateChange",function(e){e.data===YT.PlayerState.PLAYING?i():o()}),this.getPlayerState()===YT.PlayerState.PLAYING&&i(),r},c.prototype.requestFullscreen=function(){return this.fullscreenEnabled()?(screenfull.request(this._fullScreenElem),!0):!1},c.prototype.fullscreenEnabled=function(){return"undefined"!=typeof screenfull?screenfull.enabled:!1},c.prototype.startLoading=function(e){var t,n=this,i=function(i){i.data===YT.PlayerState.PLAYING&&("number"==typeof e&&n.player.seekTo(e,!0),t(),n.player.pauseVideo())};t=this.on("onStateChange",i),this.player.playVideo()},c.prototype._initializeEventListener=function(){if(!this._eventsInitialized){var t=this;this._eventHash=Math.floor(65536*(1+Math.random())).toString(16).substring(1);var n=["onStateChange","onPlaybackQualityChange","onPlaybackRateChange","onError","onApiChange","onReady"];e.forEach(n,function(e){t.player.addEventListener(e,function(n){u.$emit(t._eventHash+e,n)})}),this._eventsInitialized=!0}},c.prototype.on=function(e,t){return this._initializeEventListener(),u.$on(this._eventHash+e,function(e,n){t(n)})},o.onYouTubeIframeAPIReady=function(){l.resolve()},{loadPlayer:function(e,t){return s.then(function(){var n=r.defer(),i=new c(e,t);return i.on("onReady",function(){n.resolve(i)}),n.promise})},getAutoLoad:function(){return i}}}]}).directive("youtubePlayer",["youtube",function(n){var i=["id","height","width"],o=["autohide","autoplay","cc_load_policy","color","controls","disablekb","enablejsapi","end","fs","iv_load_policy","list","listType","loop","modestbranding","origin","playerapiid","playlist","playsinline","rel","showinfo","start","theme"];return{restrict:"EA",require:["youtubePlayer","?ngModel"],template:'<div class="youtubeOuterDiv"><div class="youtubeInnerDiv"></div><div class="youtubeOverlay" ng-transclude=""></div></div>',scope:{videoId:"="},transclude:!0,controller:["$scope","$q",function(t,n){var i=n.defer();this.setPlayer=function(e){i.resolve(e)},this.getPlayer=function(){return i.promise};var o;this.setOverlayElement=function(e){o=e},this.getOverlayElement=function(){return o};var r=null;this.getVideoElement=function(){return null===r&&(r=e.element(this.getOverlayElement()[0].querySelector(".youtubeInnerDiv"))),r}}],link:function(r,a,u,l){var s=l[0],c=l[1],d=null;a.css("position","relative"),a.css("display","block"),s.setOverlayElement(a);var y=a[0].querySelector(".youtubeInnerDiv"),f=e.element(a[0].querySelector(".youtubeOuterDiv"));f.css("width","100%"),f.css("height","100%");var h={playerVars:{}};i.forEach(function(e){"undefined"!=typeof u[e]&&(h[e]=u[e])}),o.forEach(function(e){"undefined"!=typeof u[e]&&(h.playerVars[e]=u[e])});var p=function(){h.videoId=r.videoId,h.hasOwnProperty("width")||h.hasOwnProperty("height")||(h.height="390",h.width="640"),a.css("height",t(h.height)),a.css("width",t(h.width)),d=n.loadPlayer(y,h).then(function(e){d=e,s.setPlayer(d),d.setFullScreenElement(f[0]),"undefined"!=typeof c&&c.$setViewValue(d)})};r.$watch("videoId",function(e){"undefined"!=typeof e&&(null===d?p():d.then(function(t){t.loadVideoById(e)}))});var g=16/9,v=function(){if(h.height){var e=Math.round(a[0].clientHeight*g);a.css("width",t(e))}else if(h.width){var n=Math.round(a[0].clientWidth/g);a.css("height",t(n))}};if(u.hasOwnProperty("keepAspectRatio")){var m=u.keepAspectRatio.match(/^(\d+):(\d+)$/);m&&(g=m[1]/m[2]),e.element(window).bind("resize",v),r.$watch(function(){return[a[0].clientWidth,a[0].clientHeight].join("x")},v)}r.$on("$destroy",function(){s.setPlayer(null),d.destroy(),d=null,e.element(window).unbind("resize",v)})}}}])}(angular),function(e){e.module("hrAngularYoutube").directive("playerBar",function(){return{restrict:"E",require:"^youtubePlayer",template:'<div class="played"></div><div class="loaded"></div><div class="handle"></div>',link:function(t,n,i,o){o.getPlayer().then(function(t){t.mute();var i=t.getDuration(),r=e.element(n.children()[0]),a=e.element(n.children()[1]),u=e.element(n.children()[2]),l=function(e){var o,l;t.getPlayerState()===YT.PlayerState.ENDED?(o=100,l=100):"number"==typeof e?(o=100*e/i,l=100*t.getVideoLoadedFraction()):(o=100*t.getCurrentTime()/i,l=100*t.getVideoLoadedFraction());var s=15,c=o*n[0].clientWidth/100-s/2;c=Math.min(Math.max(0,c),n[0].clientWidth-s),a.css("width",l+"%"),r.css("width",o+"%"),u.css("left",c+"px")};t.onProgress(function(){l()}),t.on("onStateChange",l);var s=o.getVideoElement(),c=e.element(document);n.on("mousedown",function(o){if(0===o.button){var r=t.getPlayerState();t.pauseVideo();var a=e.element("<div></div>");a.css("position","absolute"),a.css("width",s[0].clientWidth+"px"),a.css("height",s[0].clientHeight+"px"),a.css("pointer-events","false"),a.css("top","0"),s.parent().append(a);var u=function(e){var t=n[0].getBoundingClientRect().left,o=Math.min(Math.max(0,e-t),n[0].clientWidth),r=o/n[0].clientWidth;return Math.round(i*r)},d=function(e){var t=u(e.x);l(t)},y=function(e){var n=u(e.x);c.off("mousemove",d),c.off("mouseup",y),a.remove(),r===YT.PlayerState.PLAYING||r===YT.PlayerState.PAUSED?(t.seekTo(n,!0),l(n)):t.startLoading(n),r===YT.PlayerState.PLAYING&&t.playVideo()};c.on("mousemove",d),c.on("mouseup",y)}})})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("playerCurrentTime",function(){return{restrict:"EA",require:"^youtubePlayer",link:function(e,t,n,i){i.getPlayer().then(function(e){e.onProgress(function(){t.html(e.getHumanReadableCurrentTime()),console.log(t.html())},500)})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("playerPanel",["$animate","$timeout",function(e,t){return{restrict:"E",require:"^youtubePlayer",template:'<div ng-transclude=""></div>',transclude:!0,link:function(n,i,o,r){r.getPlayer().then(function(n){var a=r.getOverlayElement(),u={},l=function(t){u[t]=!0,e.addClass(i,"ng-show")},s=function(t){delete u[t],0===Object.keys(u).length&&e.removeClass(i,"ng-show")};if("showOnHover"in o&&o.showOnHover!==!1){var c=parseInt(o.showOnHover),d=null,y=function(){null!==d&&t.cancel(d),d=null};a.on("mouseenter",function(){y(),l("showOnHover"),isNaN(c)||(d=t(function(){s("showOnHover")},c))}),a.on("mouseleave",function(){y(),s("showOnHover")})}var f=function(e){e.data===YT.PlayerState.PLAYING?s("showOnPause"):l("showOnPause")};"showOnPause"in o&&o.showOnPause!==!1&&(n.on("onStateChange",f),f({data:n.getPlayerState()}))})}}}])}(angular),function(e){e.module("hrAngularYoutube").directive("playerPause",function(){return{restrict:"E",require:"^youtubePlayer",template:'<div style="display: inherit" ng-transclude=""></div>',transclude:!0,link:function(e,t,n,i){i.getPlayer().then(function(e){t.on("click",function(){e.pauseVideo()})})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("playerPlay",function(){return{restrict:"E",require:"^youtubePlayer",template:'<div style="display: inherit" ng-transclude=""></div>',transclude:!0,link:function(e,t,n,i){i.getPlayer().then(function(e){t.on("click",function(){e.playVideo()})})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("playerTotalTime",function(){return{restrict:"EA",require:"^youtubePlayer",link:function(e,t,n,i){i.getPlayer().then(function(e){t.html(e.getHumanReadableDuration())})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("showIfPlayerIs",["$animate",function(t){return{restrict:"AE",require:"^youtubePlayer",link:function(n,i,o,r){t.addClass(i,"ng-hide"),r.getPlayer().then(function(n){var r=[],a=o.showIfPlayerIs.toUpperCase().split(",");e.forEach(a,function(e){YT.PlayerState.hasOwnProperty(e)&&r.push(YT.PlayerState[e])});var u=function(e){-1!==r.indexOf(e.data)?t.removeClass(i,"ng-hide"):t.addClass(i,"ng-hide")};n.on("onStateChange",u),u({data:n.getPlayerState()})})}}}])}(angular);