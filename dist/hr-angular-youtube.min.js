!function(e){console.log("main.js"),"undefined"==typeof window.onYouTubeIframeAPIReady&&(window.onYouTubeIframeAPIReady=function(){setTimeout(function(){window.onYouTubeIframeAPIReady()},100)}),e.module("hrAngularYoutube",[]).run(["youtube",function(e){if(e.getAutoLoad()){var t=document.createElement("script");t.src="//www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}}])}(angular),function(e){function t(e){return"number"==typeof e||/^\d+$/.test(e)?e+"px":e}e.module("hrAngularYoutube").directive("youtubePlayer",["youtube",function(n){var r=["id","height","width"],i=["autohide","autoplay","cc_load_policy","color","controls","disablekb","enablejsapi","end","fs","iv_load_policy","list","listType","loop","modestbranding","origin","playerapiid","playlist","playsinline","rel","showinfo","start","theme"];return{restrict:"EA",require:["youtubePlayer","?ngModel"],template:'<div class="hr-yt-wrapper">  <div class="hr-yt-video-place-holder"></div>  <div class="hr-yt-overlay" ng-transclude=""></div></div>',scope:{videoId:"="},transclude:!0,controller:["$scope","$q",function(t,n){var r=n.defer();this.setPlayer=function(e){r.resolve(e)},this.getPlayer=function(){return r.promise};var i;this.setOverlayElement=function(e){i=e},this.getOverlayElement=function(){return i};var o=null;this.getVideoElement=function(){return null===o&&(o=e.element(this.getOverlayElement()[0].querySelector(".hr-yt-video-place-holder"))),o}}],link:function(o,a,l,u){var s=u[0],c=u[1],d=null,h=null;a.css("position","relative"),a.css("display","block"),s.setOverlayElement(a);var f=a[0].querySelector(".hr-yt-video-place-holder"),p=e.element(a[0].querySelector(".hr-yt-wrapper")),y=e.element(a[0].querySelector(".hr-yt-overlay")),m={playerVars:{}};r.forEach(function(e){"undefined"!=typeof l[e]&&(m[e]=l[e])}),i.forEach(function(e){"undefined"!=typeof l[e]&&(m.playerVars[e]=l[e])});var g=function(){m.videoId=o.videoId,m.hasOwnProperty("width")||m.hasOwnProperty("height")||(m.height="390",m.width="640"),a.css("height",t(m.height)),a.css("width",t(m.width)),h=n.loadPlayer(f,m).then(function(e){return d=e,s.setPlayer(d),d.setFullScreenElement(p[0]),d.setOverlayElement(y),"undefined"!=typeof c&&c.$setViewValue(d),e})};o.$watch("videoId",function(e){"undefined"!=typeof e&&(null===h?g():h.then(function(t){t.loadVideoById(e)}))});var v=16/9,P=function(){if(m.height){var e=Math.round(a[0].clientHeight*v);a.css("width",t(e))}else if(m.width){var n=Math.round(a[0].clientWidth/v);a.css("height",t(n))}};if(l.hasOwnProperty("keepAspectRatio")){var b=l.keepAspectRatio.match(/^(\d+):(\d+)$/);b&&(v=b[1]/b[2]),e.element(window).bind("resize",P),o.$watch(function(){return[a[0].clientWidth,a[0].clientHeight].join("x")},P)}o.$on("$destroy",function(){s.setPlayer(null),d.destroy(),d=null,"undefined"!=typeof c&&c.$setViewValue(void 0),e.element(window).unbind("resize",P)})}}}])}(angular),function(e){e.module("hrAngularYoutube").directive("ytSlider",["$parse","$document",function(t,n){return{restrict:"A",require:"^youtubePlayer",link:function(r,i,o,a){var l=t(o.ytSliderDown),u=t(o.ytSliderMove),s=t(o.ytSlider),c=function(e){var t=i[0].getBoundingClientRect().left,n=Math.min(Math.max(0,e-t),i[0].clientWidth),r=n/i[0].clientWidth;return r};a.getPlayer().then(function(){var t=a.getVideoElement();i.on("mousedown",function(i){if(0===i.button){var o=c(i.pageX);l(r,{$percentage:o});var a=e.element("<div></div>");a.css("position","absolute"),a.css("width",t[0].clientWidth+"px"),a.css("height",t[0].clientHeight+"px"),a.css("pointer-events","false"),a.css("top","0"),t.parent().append(a);var d=function(e){r.$apply(function(){var t=c(e.pageX);u(r,{$percentage:t})})},h=function(e){r.$apply(function(){var t=c(e.pageX);n.off("mousemove",d),n.off("mouseup",h),a.remove(),s(r,{$percentage:t})})};n.on("mousemove",d),n.on("mouseup",h)}})})}}}])}(angular),function(e){e.module("hrAngularYoutube").directive("playerCurrentSpeed",function(){return{restrict:"EA",require:"^youtubePlayer",link:function(e,t,n,r){r.getPlayer().then(function(e){var n=function(){t.html(e.getPlaybackRate())};e.on("onPlaybackRateChange",n),n()})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("playerCurrentTime",function(){return{restrict:"EA",require:"^youtubePlayer",link:function(e,t,n,r){r.getPlayer().then(function(e){e.onProgress(function(){t.html(e.getHumanReadableCurrentTime())},250),e.on("seekToCompleted",function(){t.html(e.getHumanReadableCurrentTime())})})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("playerPanel",["$animate","$timeout",function(e,t){return{restrict:"E",require:"^youtubePlayer",template:'<div ng-transclude=""></div>',transclude:!0,link:function(n,r,i,o){o.getPlayer().then(function(n){var a=o.getOverlayElement(),l={},u=function(t){l[t]=!0,e.addClass(r,"ng-show")},s=function(t){delete l[t],0===Object.keys(l).length&&e.removeClass(r,"ng-show")};if("showOnHover"in i&&i.showOnHover!==!1){var c=parseInt(i.showOnHover),d=null,h=function(){null!==d&&t.cancel(d),d=null};a.on("mouseenter",function(){h(),u("showOnHover"),isNaN(c)||(d=t(function(){s("showOnHover")},c))}),a.on("mouseleave",function(){h(),s("showOnHover")})}var f=function(e){e.data===YT.PlayerState.PLAYING?s("showOnPause"):u("showOnPause")};"showOnPause"in i&&i.showOnPause!==!1&&(n.on("onStateChange",f),f({data:n.getPlayerState()}))})}}}])}(angular),function(e){e.module("hrAngularYoutube").directive("playerPause",function(){return{restrict:"E",require:"^youtubePlayer",template:'<div style="display: inherit" ng-transclude=""></div>',transclude:!0,link:function(e,t,n,r){r.getPlayer().then(function(e){t.on("click",function(){e.pauseVideo()})})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("playerPlay",function(){return{restrict:"E",require:"^youtubePlayer",template:'<div style="display: inherit" ng-transclude=""></div>',transclude:!0,link:function(e,t,n,r){r.getPlayer().then(function(e){t.on("click",function(){e.playVideo()})})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("playerProgressBar",["$compile",function(t){return{restrict:"E",require:"^youtubePlayer",template:'<div yt-slider="onSliderUp($percentage)"     yt-slider-down="onSliderDown()"     yt-slider-move="onSliderMove($percentage)" style="width:100%;height:100%;">  <div class="hr-yt-played"></div>  <div class="hr-yt-loaded"></div>  <div class="hr-yt-handle"></div></div>',scope:{},link:function(n,r,i,o){o.getPlayer().then(function(i){var o=i.getDuration(),a=e.element(r[0].querySelector(".hr-yt-played")),l=e.element(r[0].querySelector(".hr-yt-loaded")),u=e.element(r[0].querySelector(".hr-yt-handle")),s=function(e){var t,n;i.getPlayerState()===YT.PlayerState.ENDED?(t=100,n=100):"number"==typeof e?(t=100*e/o,n=100*i.getVideoLoadedFraction()):(t=100*i.getCurrentTime()/o,n=100*i.getVideoLoadedFraction());var s=15,c=t*r[0].clientWidth/100-s/2;c=Math.min(Math.max(0,c),r[0].clientWidth-s),l.css("width",n+"%"),a.css("width",t+"%"),u.css("left",c+"px")};i.onProgress(function(){s()}),i.on("onStateChange",s);var c=null;n.onSliderDown=function(){c=i.getPlayerState(),i.pauseVideo()},n.onSliderMove=function(e){var t=Math.round(o*e);s(t)},n.onSliderUp=function(e){var t=Math.round(o*e);c===YT.PlayerState.PLAYING||c===YT.PlayerState.PAUSED?(i.eventSeekTo(t,!0),s(t)):i.startLoading(t),c===YT.PlayerState.PLAYING&&i.playVideo()};var d=function(i){if(i.showMarker){var o=e.element('<span class="hr-yt-marker"       marker-name="'+i.name+'"></span>');r.append(o),t(o)(n)}};e.forEach(i.getMarkers(),d),i.on("markerAdd",d)})}}}]).directive("hrYtMarker",function(){return{restrict:"C",require:"^youtubePlayer",link:function(t,n,r,i){i.getPlayer().then(function(t){var i=t.getDuration(),o=t.getMarker(r.markerName),a=100*o.time/i,l=function(){var e=a*n.parent()[0].clientWidth/100;n.css("left",e+"px")};l(),t.on("fullscreenEnabled",l),e.element(window).bind("resize",l)})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("playerRepeatAvailableSpeed",function(){return{restrict:"A",template:function(e){return e.removeAttr("player-repeat-available-speed"),e.attr("ng-repeat","$speed in availableSpeeds"),e[0].outerHTML},replace:!0,priority:1e3,scope:{},require:"^youtubePlayer",link:function(e,t,n,r){r.getPlayer().then(function(t){e.availableSpeeds=t.getAvailablePlaybackRates(),n.hasOwnProperty("reverse")&&e.availableSpeeds.reverse()})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("playerSetSpeed",["$parse",function(e){return{restrict:"A",require:"^youtubePlayer",link:function(t,n,r,i){var o=e(r.playerSetSpeed);i.getPlayer().then(function(e){n.on("click",function(){t.$apply(function(){var n=o(t);e.setPlaybackRate(n)})})})}}}])}(angular),function(e){e.module("hrAngularYoutube").directive("playerToggleFullscreen",function(){return{restrict:"E",require:"^youtubePlayer",template:'<div style="display: inherit" ng-transclude=""></div>',transclude:!0,link:function(e,t,n,r){r.getPlayer().then(function(e){t.on("click",function(){e.toggleFullscreen()})})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("playerTotalTime",function(){return{restrict:"EA",require:"^youtubePlayer",link:function(e,t,n,r){r.getPlayer().then(function(e){t.html(e.getHumanReadableDuration())})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("playerVolumeHorizontal",function(){return{restrict:"E",require:"^youtubePlayer",template:'<div ng-click="toggleMute()" class="ng-transclude"></div><div class="hr-yt-volume-hr-bar"     yt-slider-move="onSliderMove($percentage)"     yt-slider="onSliderUp($percentage)">  <div class="hr-yt-setted"></div>  <div class="hr-yt-handle"></div></div>',transclude:!0,scope:{},link:function(t,n,r,i){var o=e.element(n[0].querySelector(".hr-yt-volume-hr-bar")),a=e.element(n[0].querySelector(".hr-yt-setted")),l=e.element(n[0].querySelector(".hr-yt-handle"));i.getPlayer().then(function(e){console.log("Volume player",e.getVolume());var n=function(e){var t=e*o[0].clientWidth-l[0].clientWidth/2;t=Math.min(Math.max(0,t),o[0].clientWidth-l[0].clientWidth/2),a.css("width",100*e+"%"),l.css("left",t+"px")};t.toggleMute=function(){e.toggleMute()},t.onSliderMove=function(t){e.setVolume(100*t),n(t)},t.onSliderUp=function(t){e.setVolume(100*t),n(t)},t.$watch(function(){return e.getVolume()},function(e){n(e/100)})})}}})}(angular),function(e){e.module("hrAngularYoutube").directive("showIfPlayerIs",["$animate",function(t){return{restrict:"AE",require:"^youtubePlayer",link:function(n,r,i,o){t.addClass(r,"ng-hide"),o.getPlayer().then(function(n){var o=[],a=i.showIfPlayerIs.toUpperCase().split(",");e.forEach(a,function(e){YT.PlayerState.hasOwnProperty(e)&&o.push(YT.PlayerState[e])});var l=function(e){-1!==o.indexOf(e.data)?t.removeClass(r,"ng-hide"):t.addClass(r,"ng-hide")};n.on("onStateChange",l),l({data:n.getPlayerState()})})}}}]).directive("showIfFullscreenEnabled",["$animate",function(e){return{restrict:"A",require:"^youtubePlayer",link:function(t,n,r,i){e.addClass(n,"ng-hide"),i.getPlayer().then(function(t){t.fullscreenEnabled()?e.removeClass(n,"ng-hide"):e.addClass(n,"ng-hide")})}}}]).directive("showIfFullscreen",["$animate",function(e){return{restrict:"A",require:"^youtubePlayer",link:function(t,n,r,i){e.addClass(n,"ng-hide"),i.getPlayer().then(function(t){var i=function(){var i=t.isFullscreen();"true"===r.showIfFullscreen&&(i=!i),i?e.removeClass(n,"ng-hide"):e.addClass(n,"ng-hide")};i(),t.on("fullscreenchange",i)})}}}]).directive("showIfMuted",["$animate",function(e){return{restrict:"A",require:"^youtubePlayer",link:function(t,n,r,i){e.addClass(n,"ng-hide"),i.getPlayer().then(function(i){var o=function(){var t=!i.isMuted();"true"===r.showIfMuted&&(t=!t),t?e.removeClass(n,"ng-hide"):e.addClass(n,"ng-hide")};o(),t.$watch(function(){return i.isMuted()},o)})}}}])}(angular),function(e){e.module("hrAngularYoutube").factory("YoutubeMarker",function(){var t=function(t){this.time=null,this.endTime=null,this.duration=null,this.handler=this.handler||null,this.fireOnce=!1,this.launchOnSeek=!1,this.blockFF=!1,this.showMarker=!0,this.name=null,this._runCount=0,this._isRunning=!1,e.extend(this,t),null!==this.duration&&(this.endTime=this.time+this.duration)};return t.prototype.shouldLaunchOnSeek=function(){return this.blockFF===!0?!0:this.launchOnSeek},t.prototype.hasEndTime=function(){return null!==this.endTime},t.prototype.inRange=function(e){return this.hasEndTime()?e>=this.time&&e<this.endTime:!1},t.prototype.startedIn=function(e,t){return this._runCount>0&&this.fireOnce?!1:this.time>e&&this.time<=t},t.prototype.endedIn=function(e,t){return this.hasEndTime()?this.endTime>e&&this.endTime<=t:!1},t.prototype.start=function(){return this._runCount++,this._isRunning=!0,"function"==typeof this.handler&&this.handler(),!0},t.prototype.end=function(){this._isRunning=!1,"function"==typeof this.onEnd&&this.onEnd()},t.prototype.isRunning=function(){return this._isRunning},t})}(angular),function(e){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function n(e){e=Math.floor(e);var t=e%60,n=Math.floor(e/60),r=Math.floor(n/60);return n%=60,r>0?r+":"+String("00"+n).slice(-2)+":"+String("00"+t).slice(-2):n+":"+String("00"+t).slice(-2)}e.module("hrAngularYoutube").provider("youtube",function(){var r={playerVars:{origin:location.origin+"/",enablejsapi:1}},i=!0;this.setAutoLoad=function(e){i=e},this.setOptions=function(e){r=e},this.getOptions=function(){return r},this.setOption=function(e,t){r[e]=t},this.setPlayerVarOption=function(e,t){r.playerVars[e]=t},this.$get=["$window","$q","$interval","$rootScope",function(o,a,l,u){var s=a.defer(),c=s.promise,d=function(t,n){var i={};e.extend(i,e.copy(r),n),i.playerVars={},e.extend(i.playerVars,e.copy(r.playerVars),n.playerVars),this.options=i;var o=e.copy(i);o.width="100%",o.height="100%";var a=this;this.fullscreenEnabled()&&document.addEventListener(screenfull.raw.fullscreenchange,function(){a.isFullscreen()?e.element(a._fullScreenElem).addClass("fullscreen"):e.element(a._fullScreenElem).removeClass("fullscreen"),a.emit("fullscreenchange")}),this.player=new YT.Player(t,o),this.markersByName={},this._muted=!1,this._volume=100,this.on("onStateChange",function(e){e.data===YT.PlayerState.PLAYING&&(a._muted=a.player.isMuted(),a.setVolume(a.player.getVolume()))})};return e.forEach(["loadVideoById","loadVideoByUrl","cueVideoById","cueVideoByUrl","cuePlaylist","loadPlaylist","playVideo","pauseVideo","stopVideo","seekTo","clearVideo","nextVideo","previousVideo","playVideoAt","setSize","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","setLoop","setShuffle","getVideoLoadedFraction","getPlayerState","getCurrentTime","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getDuration","getVideoUrl","getVideoEmbedCode","getPlaylist","getPlaylistIndex","getIframe","destroy"],function(e){d.prototype[e]=function(){return this.player[e].apply(this.player,arguments)}}),d.prototype.setOverlayElement=function(e){this._element=e},d.prototype.getOverlayElement=function(){return this._element},d.prototype.setFullScreenElement=function(e){this._fullScreenElem=e},d.prototype.getHumanReadableDuration=function(){return n(this.getDuration())},d.prototype.getHumanReadableCurrentTime=function(){return n(this.getCurrentTime())},d.prototype.onProgress=function(e,t){"undefined"==typeof t&&(t=100);var n=null,r=function(){null===n&&(n=l(e,t))},i=function(){l.cancel(n),n=null},o=function(){i()};return this.on("onStateChange",function(e){e.data===YT.PlayerState.PLAYING?r():i()}),this.getPlayerState()===YT.PlayerState.PLAYING&&r(),o},d.prototype.requestFullscreen=function(){return this.fullscreenEnabled()?(screenfull.request(this._fullScreenElem),this.emit("fullscreenEnabled"),!0):!1},d.prototype.toggleFullscreen=function(){if(this.fullscreenEnabled()){var e=screenfull.isFullscreen;return screenfull.toggle(this._fullScreenElem),this.emit(e?"fullscreenDisabled":"fullscreenEnabled"),!0}return!1},d.prototype.isFullscreen=function(){return this.fullscreenEnabled()?screenfull.isFullscreen:!1},d.prototype.fullscreenEnabled=function(){return"undefined"!=typeof screenfull?screenfull.enabled:!1},d.prototype.eventSeekTo=function(t,n){var r=this,i=this.player.getCurrentTime();e.forEach(r.markersByName,function(e){e.blockFF!==!1&&e.startedIn(i,t)&&(t=e.time)}),this.player.seekTo(t,n);var o=l(function(){var e=r.player.getCurrentTime(),n=!1;i>t?i>e&&(n=!0):e>=t&&(n=!0),n&&(r.emit("seekToCompleted",{newTime:t,oldTime:i}),l.cancel(o))},50)},d.prototype.startLoading=function(e){var t,n=this,r=function(r){r.data===YT.PlayerState.PLAYING&&("number"==typeof e&&n.eventSeekTo(e,!0),t(),n.player.pauseVideo())};t=this.on("onStateChange",r),this.player.playVideo()},d.prototype._initializeEventListener=function(){if(!this._eventsInitialized){var n=this;this._eventHash=t();var r=["onStateChange","onPlaybackQualityChange","onPlaybackRateChange","onError","onApiChange","onReady"];e.forEach(r,function(e){n.player.addEventListener(e,function(t){n.emit(e,t)})}),this._eventsInitialized=!0}},d.prototype.on=function(e,t){return this._initializeEventListener(),u.$on(this._eventHash+e,function(e,n){t(n)})},d.prototype.emit=function(e,t){u.$emit(this._eventHash+e,t)},d.prototype._initializeMarkerListener=function(){if(!this._markerListener){this._markerListener=!0;var t=function(e){e.start()&&r.emit("markerRun",e)},n=function(e){e.end(),r.emit("markerStop",e)},r=this,i=0;this.onProgress(function(){var o=r.getCurrentTime(),a=i;e.forEach(r.markersByName,function(e){e.startedIn(i,o)&&(t(e),a=Math.max(a,e.time)),e.endedIn(i,o)&&e.isRunning()&&(n(e),a=Math.max(a,e.endTime))}),i=a}),this.on("seekToCompleted",function(o){e.forEach(r.markersByName,function(e){e.isRunning()?e.inRange(o.newTime)||n(e):e.shouldLaunchOnSeek()&&(e.hasEndTime()&&e.inRange(o.newTime)||!e.hasEndTime()&&e.startedIn(o.oldTime,o.newTime))&&t(e)}),i=o.newTime})}},d.prototype.addMarker=function(e){this._initializeMarkerListener(),e.hasOwnProperty("name")&&null!==e.name||(e.name=t()),this.markersByName[e.name]=e,this.emit("markerAdd",e)},d.prototype.removeMarker=function(e){delete this.markersByName[e.name]},d.prototype.getMarkers=function(){return this.markersByName},d.prototype.getMarker=function(e){return this.markersByName[e]},d.prototype.setVolume=function(e){this._muted=0===e,this._volume=e,this.player.setVolume(e)},d.prototype.getVolume=function(){return this._muted?0:this._volume},d.prototype.mute=function(){this._muted=!0,this.player.mute()},d.prototype.unMute=function(){this._muted=!1,this.player.unMute()},d.prototype.isMuted=function(){return this._muted},d.prototype.toggleMute=function(){this.isMuted()?this.unMute():this.mute()},o.onYouTubeIframeAPIReady=function(){s.resolve()},{loadPlayer:function(e,t){return c.then(function(){var n=a.defer(),r=new d(e,t);return r.on("onReady",function(){n.resolve(r)}),n.promise})},getAutoLoad:function(){return i}}}]})}(angular),function(e){e.module("hrAngularYoutube").factory("YoutubeTemplateMarker",["$rootScope","$compile","YoutubeMarker","$q","$http","$templateCache",function(t,n,r,i,o,a){var l=function(e,t){this._player=e,this._elm=null,this._scope=null,this._parentElm=t.parent||e.getOverlayElement(),this._addMethod=t.addMethod||"append",this.template=null,this.link=this.link||null,r.call(this,t),this._loadTemplate(t)};return e.extend(l.prototype,r.prototype),l.prototype.handler=function(){var e=this;this._scope=t.$new(!0),this.template.then(function(t){e._elm=n(t)(e._scope),"append"===e._addMethod?e._parentElm.append(e._elm):"prepend"===e._addMethod&&e._parentElm.prepend(e._elm),"function"==typeof e.link&&e.link(e._player,e._scope)})},l.prototype._loadTemplate=function(e){e.hasOwnProperty("template")?this.template=i.when(e.template):e.hasOwnProperty("templateUrl")&&(this.template=o.get(e.templateUrl,{cache:a}).then(function(e){return e.data}))},l.prototype.onEnd=function(){this.destroy()},l.prototype.destroy=function(){null!==this._elm&&(this._scope.$destroy(),this._elm.remove(),this._scope=null,this._elm=null)},l}])}(angular);